var cull=function(e){"use strict";function r(e){return!!e&&typeof e=="object"&&typeof e.length=="number"&&!e.tagName}function i(e){return n.call(e)==="[object Array]"?e:n.call(e)==="[object Arguments]"?t.call(e):typeof e=="undefined"||e===null?[]:t.call(arguments)}function s(e,t){var n,r;for(n=0,r=t.length;n<r;++n)e(t[n],n,t);return t}function o(e){return typeof e=="function"}function u(e,t,n){var r=0,i,s=n,o=t;arguments.length===2&&(s=t,o=s[0],r=1),typeof s=="string"&&(s=s.split(""));for(i=s.length;r<i;++r)o=e(o,s[r]);return o}function a(e,t){var n,r;for(n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}function f(e,t){var n,r;for(n=0,r=t.length;n<r;++n)if(e(t[n]))return!0;return!1}function l(e,t){var n,r,i,s;for(n=0,r=t.length;n<r;++n){e(t[n])?i=!0:s=!0;if(i&&s)return!0}return!1}function c(e){return e.trim&&e.trim()||e.replace(/^\s+|\s+$/,"")}function h(e){return e}function p(e){return typeof e!="undefined"&&e!==null}function d(e){return function(t){return e.call(this,t)}}function v(e){return function(t){return t[e]}}function m(e,t){return function(n){return n[e].apply(n,i(t))}}function g(e){return function(t){return e===t}}function b(e,t){var n=i(e);return function(){var e=n.length,r=arguments;while(e--)r=[n[e].apply(t||this,r)];return r[0]}}function w(){var e=arguments;return function(t){return t.apply(this,e)}}function E(e){var n=t.call(arguments,1);return function(){return e.apply(this,n.concat(t.call(arguments)))}}function S(e,n){var r=typeof n=="string"?e[n]:n,i=t.call(arguments,2);return function(){return r.apply(e,i.concat(t.call(arguments)))}}function x(e){var t=[],n,i;for(n=0,i=e.length;n<i;n++)t=t.concat(r(e[n])?x(e[n]):e[n]);return t}function T(e,t){var n,r;for(n=0,r=t.length;n<r;++n)if(e===t[n])return n;return-1}function N(e){var t=[],n,r;for(n=0,r=e.length;n<r;++n)T(e[n],t)<0&&t.push(e[n]);return t}function C(e,t){var n,r;for(n=0,r=t.length;n<r;++n)if(e(t[n]))return t[n]}function k(e,t){var n=[],r,i;for(r=0,i=t.length;r<i;++r)e(t[r])&&n.push(t[r]);return n}function L(e,t){return k(function(e){return T(e,t)<0},e)}function A(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}function O(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(e[t]);return n}function _(e,t){var n=[],r,i;for(r=0,i=t.length;r<i;r++)n.push(e(t[r]));return n}function D(e){return function(){return!e.apply(this,arguments)}}function P(e,t){return k(D(e),t)}function H(e,t){return i(e).concat(i(t))}function B(e,t){var n=[],r,i;for(r=0,i=t.length;r<i;r+=e)n.push(t.slice(r,r+e));return n}function j(e,t){return M(_(e,M(t)))}function F(e,t){return u(H,_(e,t))}function I(e,t){var n=[],r,i;for(r=0,i=t.length;r<i;r+=1)n.push(t[r]),r<i-1&&n.push(e);return n}function q(e,n,r){var i=e[n];e[n]=function(){var e=i.apply(this,arguments),n=r.apply(this,[e].concat(t.call(arguments)));return typeof n!="undefined"?n:e}}function R(e,t,n){var r=e[t];e[t]=function(){return n.apply(this,arguments),r.apply(this,arguments)}}function U(e,t,n){var r=E(n,e[t]);e[t]=function(){return r.apply(this,arguments)}}var t=Array.prototype.slice,n=Object.prototype.toString,y="compose takes func|[funcs] and optional thisp object",M=E(k,p);return{trim:c,doall:s,reduce:u,all:a,some:f,onlySome:l,isFunction:o,isList:r,toList:i,identity:h,defined:p,unary:d,prop:v,func:m,eq:g,compose:b,callWith:w,partial:E,bind:S,keys:A,values:O,concat:H,flatten:x,uniq:N,first:C,select:k,negate:D,reject:P,seldef:M,map:_,mapdef:j,mapcat:F,partition:B,difference:L,interpose:I,indexOf:T,after:q,before:R,around:U}}(this);typeof require=="function"&&typeof module!="undefined"&&(module.exports=cull);var dome=function(e){function t(n){if(e.isList(n))return e.flatten(e.map(t,n));var r=[],i=n.firstChild;while(i)i.nodeType===1&&r.push(i),i=i.nextSibling;return r}function n(e){return document.getElementById(e)}function r(e,t){var n=t||document;if(n.getElementsByClassName)return n.getElementsByClassName(e);var r=n.getElementsByTagName("*"),i,s,o=[],u=new RegExp("(^|\\s)"+e+"(\\s|$)");for(i=0,s=r.length;i<s;++i)u.test(r[i].className)&&o.push(r[i]);return o}function i(e){e.parentNode.removeChild(e)}function s(e,t){if(!e.parentNode)return;e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}function o(e,t){var n=new RegExp("(^|\\s)"+e+"(\\s|$)");return n.test(t.className)}function u(t,n){if(e.isList(n))return e.doall(e.partial(u,t),n);if(o(t,n))return;n.className=e.trim(n.className+" "+t)}function a(t,n){if(e.isList(n))return e.doall(e.partial(a,t),n);if(!o(t,n))return;var r=new RegExp("\\b"+t+"\\b","g");n.className=e.trim(n.className.replace(r,""))}function f(e){var t=e.nodeType;if(t===1||t===9||t===11){if(typeof e.textContent=="string")return e.textContent;var n="";for(e=e.firstChild;e;e=e.nextSibling)n+=f(e);return n}return t===3||t===4?e.nodeValue:""}function l(t){var n=document.createDocumentFragment();return e.doall(e.bind(n,"appendChild"),e.toList(t)),n}function h(e){return e?(typeof e._dome_uuid!="number"&&(e._dome_uuid=c++),e._dome_uuid):null}function d(e,t){if(!t||!e)return!1;var n=h(e);p[n]||(p[n]={});if(p[n][h(t)])return!0;var r=[];while(t&&t!==e)r.push(h(t)),t=t.parentNode;var i=!!t;for(var s=0,o=r.length;s<o;s++)p[n][r[s]]=i;return i}function g(e,t){var n;e=e||{};for(n in e)e.hasOwnProperty(n)&&(t.setAttribute("data-"+n,e[n]),t["data-"+n]=e[n])}function y(e,t){return t.getAttribute("data-"+e)}function w(e,t){var n,r;e=e||{};for(n in e)e.hasOwnProperty(n)&&(r=b[n],r?r(t,e[n]):t[n]=e[n])}function E(t,n){t=e.toList(t);var r,i;for(r=0,i=t.length;r<i;++r)typeof t[r]=="string"?n.appendChild(document.createTextNode(t[r])):n.appendChild(t[r])}function S(e,t){t.innerHTML="",E(e,t)}var c=0,p={},v,m=function(t){return t!==null&&typeof t!="undefined"&&(typeof t.nodeType!="undefined"||typeof t=="string"||e.isList(t))},b={style:function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])},data:function(e,t){g(t,e)}};return v=function(e,t,n){if(!n&&m(t))return v(e,{},t);var r=document.createElement(e);return w(t,r),E(n||[],r),r},v.toString=function(){return"dome.el()"},e.doall(function(t){v[t]=e.partial(v,t)},["a","br","div","fieldset","form","h2","h3","h4","h5","img","input","label","li","p","span","strong","textarea","ul","span","select","option","ol","iframe","table","tr","td","pre","button","i"]),{propmap:b,el:v,setProp:w,append:E,setContent:S,children:t,id:n,byClass:r,remove:i,replace:s,frag:l,text:f,data:{get:y,set:g},cn:{has:o,add:u,rm:a},uuid:h,contains:d}}(this.cull);(function(e,t){function n(e,t){return/^(?:function|object|unknown)$/.test(typeof e[t])}function a(e,t){return function(n){t.call(i[e],n||window.event)}}function f(e,t){return{handler:t,wrappedHandler:a(e,t)}}function c(e,t,n,r){s(t,n,function(t){e(t.target,n,t)&&r.call(t.target,t)})}var r=function(){if(typeof document.documentElement.uniqueID!="undefined")return function(e){return e.uniqueID};var e=0;return function(t){return t.__uniqueID||(t.__uniqueID="uniqueID__"+e,e+=1),t.__uniqueID}}(),i={},s,o,u=document.documentElement;if(n(u,"addEventListener")&&n(u,"removeEventListener")&&n(window,"addEventListener")&&n(window,"removeEventListener"))s=function(e,t,n){return e.addEventListener(t,n,!1),{cancel:function(){o(e,t,n)}}},o=function(e,t,n){e.removeEventListener(t,n,!1)};else if(n(u,"attachEvent")&&n(u,"detachEvent")&&n(window,"attachEvent")&&n("detachEvent")){var l={};s=function(e,t,n){var s=r(e);i[s]=e,l[s]||(l[s]={}),l[s][t]||(l[s][t]=[]);var u=f(s,n);return l[s][t].push(u),e.attachEvent("on"+t,u.wrappedHandler),{cancel:function(){o(e,t,n)}}},o=function(t,n,i){var s=r(t);if(!l[s]||!l[s][n])return;l[s][n]=e.select(function(e){if(e.handler!==i)return!0;t.detachEvent("on"+n,e.wrappedHandler)},l[s][n])}}c.bycn=function(n,r,i,s){c(e.partial(t.cn.has,n),r,i,s)},dome.events={mouseenter:function(e,t){var n=null,r=s(e,"mouseover",function(r){n!==e&&(t.call(e,r),n=e)}),i=s(e,"mouseout",function(t){var r=t.relatedTarget||t.toElement;try{r&&!r.nodeName&&(r=r.parentNode)}catch(t){return}e!==r&&!dome.contains(e,r)&&(n=null)});return{cancel:function(){r.cancel(),i.cancel()}}},mouseleave:function(e,t){return s(e,"mouseout",function(n){!dome.contains(e,n.relatedTarget)&&e!==n.relatedTarget&&t.call(e,n)})}},dome.on=function(e,t,n){return dome.events[t]?dome.events[t](e,n):s(e,t,n)},dome.off=o,dome.delegate=c,dome.propmap.events=function(t,n){e.doall(function(e){s(t,e,n[e])},e.keys(n))}})(cull,dome),!function(e,t,n){function o(e,n){var r=t.createElement(e||"div"),i;for(i in n)r[i]=n[i];return r}function u(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function f(e,t,n,r){var o=["opacity",t,~~(e*100),n,r].join("-"),u=.01+n/r*100,f=Math.max(1-(1-e)/t*(100-u),e),l=s.substring(0,s.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return i[o]||(a.insertRule("@"+c+"keyframes "+o+"{"+"0%{opacity:"+f+"}"+u+"%{opacity:"+e+"}"+(u+.01)+"%{opacity:1}"+(u+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",a.cssRules.length),i[o]=1),o}function l(e,t){var i=e.style,s,o;if(i[t]!==n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(o=0;o<r.length;o++){s=r[o]+t;if(i[s]!==n)return s}}function c(e,t){for(var n in t)e.style[l(e,n)||n]=t[n];return e}function h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]===n&&(e[i]=r[i])}return e}function p(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function v(e){if(!this.spin)return new v(e);this.opts=h(e||{},v.defaults,d)}var r=["webkit","Moz","ms","O"],i={},s,a=function(){var e=o("style",{type:"text/css"});return u(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};v.defaults={},h(v.prototype,{spin:function(e){this.stop();var t=this,n=t.opts,r=t.el=c(o(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex}),i=n.radius+n.length+n.width,u,a;e&&(e.insertBefore(r,e.firstChild||null),a=p(e),u=p(r),c(r,{left:(n.left=="auto"?a.x-u.x+(e.offsetWidth>>1):parseInt(n.left,10)+i)+"px",top:(n.top=="auto"?a.y-u.y+(e.offsetHeight>>1):parseInt(n.top,10)+i)+"px"})),r.setAttribute("aria-role","progressbar"),t.lines(r,t.opts);if(!s){var f=0,l=n.fps,h=l/n.speed,d=(1-n.opacity)/(h*n.trail/100),v=h/n.lines;(function m(){f++;for(var e=n.lines;e;e--){var i=Math.max(1-(f+e*v)%h*d,n.opacity);t.opacity(r,n.lines-e,i,n)}t.timeout=t.el&&setTimeout(m,~~(1e3/l))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=n),this},lines:function(e,t){function i(e,r){return c(o(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*n+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var n=0,r;for(;n<t.lines;n++)r=c(o(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:s&&f(t.opacity,t.trail,n,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&u(r,c(i("#000","0 0 4px #000"),{top:"2px"})),u(e,u(r,i(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),function(){function e(e,t){return o("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=c(o("group"),{behavior:"url(#default#VML)"});!l(t,"transform")&&t.adj?(a.addRule(".spin-vml","behavior:url(#default#VML)"),v.prototype.lines=function(t,n){function s(){return c(e("group",{coordsize:i+" "+i,coordorigin:-r+" "+ -r}),{width:i,height:i})}function l(t,i,o){u(a,u(c(s(),{rotation:360/n.lines*t+"deg",left:~~i}),u(c(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:o}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,i=2*r,o=-(n.width+n.length)*2+"px",a=c(s(),{position:"absolute",top:o,left:o}),f;if(n.shadow)for(f=1;f<=n.lines;f++)l(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=n.lines;f++)l(f);return u(t,a)},v.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}):s=l(t,"animation")}(),typeof define=="function"&&define.amd?define(function(){return v}):e.Spinner=v}(window,document),function(e){"use strict";e(function(){function r(e,t,n,r){return i(e).then(t,n,r)}function i(e){var t,n;return e instanceof o?t=e:l(e)?(n=f(),e.then(function(e){n.resolve(e)},function(e){n.reject(e)},function(e){n.progress(e)}),t=n.promise):t=u(e),t}function s(e){return r(e,a)}function o(e){this.then=e}function u(e){var t=new o(function(t){try{return i(typeof t=="function"?t(e):e)}catch(n){return a(n)}});return t}function a(e){var t=new o(function(t,n){try{return i(typeof n=="function"?n(e):a(e))}catch(r){return a(r)}});return t}function f(){function h(e,t,n){return u(e,t,n)}function p(e){return c(i(e))}function d(e){return c(a(e))}function v(e){return l(e)}var e,t,r,s,u,l,c;return t=new o(h),e={then:h,resolve:p,reject:d,progress:v,promise:t,resolver:{resolve:p,reject:d,progress:v}},r=[],s=[],u=function(e,t,n){var i,o;return i=f(),o=typeof n=="function"?function(e){try{i.progress(n(e))}catch(t){i.progress(t)}}:function(e){i.progress(e)},r.push(function(n){n.then(e,t).then(i.resolve,i.reject,o)}),s.push(o),i.promise},l=function(e){return y(s,e),e},c=function(e){return u=e.then,c=i,l=E,y(r,e),s=r=n,e},e}function l(e){return e&&typeof e.then=="function"}function c(e,t,n,i,s){return b(2,arguments),r(e,function(e){function g(e){p(e)}function y(e){h(e)}var o,u,a,l,c,h,p,d,v,m;v=e.length>>>0,o=Math.max(0,Math.min(t,v)),a=[],u=v-o+1,l=[],c=f();if(!o)c.resolve(a);else{d=c.progress,p=function(e){l.push(e),--u||(h=p=w,c.reject(l))},h=function(e){a.push(e),--o||(h=p=w,c.resolve(a))};for(m=0;m<v;++m)m in e&&r(e[m],y,g,d)}return c.promise.then(n,i,s)})}function h(e,t,n,r){function i(e){return t?t(e[0]):e[0]}return c(e,1,i,n,r)}function p(e,t,n,r){return b(1,arguments),v(e,E).then(t,n,r)}function d(){return v(arguments,E)}function v(e,t){return r(e,function(e){var n,i,s,o,u,a;s=i=e.length>>>0,n=[],a=f();if(!s)a.resolve(n);else{o=function(i,o){r(i,t).then(function(e){n[o]=e,--s||a.resolve(n)},a.reject)};for(u=0;u<i;u++)u in e?o(e[u],u):--s}return a.promise})}function m(n,i){var s=t.call(arguments,1);return r(n,function(t){var n;return n=t.length,s[0]=function(e,t,s){return r(e,function(e){return r(t,function(t){return i(e,t,s,n)})})},e.apply(t,s)})}function g(e,t,n){var i=arguments.length>2;return r(e,function(e){return e=i?n:e,t.resolve(e),e},function(e){return t.reject(e),a(e)},t.progress)}function y(e,t){var n,r=0;while(n=e[r++])n(t)}function b(e,t){var n,r=t.length;while(r>e){n=t[--r];if(n!=null&&typeof n!="function")throw new Error("arg "+r+" must be a function")}}function w(){}function E(e){return e}var e,t,n;return r.defer=f,r.resolve=i,r.reject=s,r.join=d,r.all=p,r.map=v,r.reduce=m,r.any=h,r.some=c,r.chain=g,r.isPromise=l,o.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(n,e)},yield:function(e){return this.then(function(){return e})},spread:function(e){return this.then(function(t){return p(t,function(t){return e.apply(n,t)})})}},t=[].slice,e=[].reduce||function(e){var t,n,r,i,s;s=0,t=Object(this),i=t.length>>>0,n=arguments;if(n.length<=1)for(;;){if(s in t){r=t[s++];break}if(++s>=i)throw new TypeError}else r=n[1];for(;s<i;++s)s in t&&(r=e(r,t[s],s,t));return r},r})}(typeof define=="function"&&define.amd?define:function(e){typeof exports=="object"?module.exports=e():this.when=e()}),(typeof define=="function"&&define.amd&&function(e){define(e)}||typeof module=="object"&&function(e){module.exports=e()}||function(e){this.bane=e()})(function(){"use strict";function t(e,t,n){var r,i=n.length;if(i>0){for(r=0;r<i;++r)n[r](e,t);return}setTimeout(function(){throw t.message=e+" listener threw error: "+t.message,t},0)}function n(e){if(typeof e!="function")throw new TypeError("Listener is not function");return e}function r(e){return e.supervisors||(e.supervisors=[]),e.supervisors}function i(e,t){return e.listeners||(e.listeners={}),t&&!e.listeners[t]&&(e.listeners[t]=[]),t?e.listeners[t]:e.listeners}function s(e){return e.errbacks||(e.errbacks=[]),e.errbacks}function o(o){function u(e,n,r){try{n.listener.apply(n.thisp||o,r)}catch(i){t(e,i,s(o))}}return o=o||{},o.on=function(e,t,s){if(typeof e=="function")return r(this).push({listener:e,thisp:t});i(this,e).push({listener:n(t),thisp:s})},o.off=function(e,t){var n,o,u,a;if(!e){n=r(this),n.splice(0,n.length),o=i(this);for(u in o)o.hasOwnProperty(u)&&(n=i(this,u),n.splice(0,n.length));n=s(this),n.splice(0,n.length);return}typeof e=="function"?(n=r(this),t=e):n=i(this,e);if(!t){n.splice(0,n.length);return}for(u=0,a=n.length;u<a;++u)if(n[u].listener===t){n.splice(u,1);return}},o.once=function(e,t,n){var r=function(){o.off(e,r),t.apply(this,arguments)};o.on(e,r,n)},o.bind=function(e,t){var n,r,i;if(!t)for(n in e)typeof e[n]=="function"&&this.on(n,e[n],e);else for(r=0,i=t.length;r<i;++r){if(typeof e[t[r]]!="function")throw new Error("No such method "+t[r]);this.on(t[r],e[t[r]],e)}return e},o.emit=function(t){var n=r(this),s=e.call(arguments),o,a;for(o=0,a=n.length;o<a;++o)u(t,n[o],s);n=i(this,t).slice(),s=e.call(arguments,1);for(o=0,a=n.length;o<a;++o)u(t,n[o],s)},o.errback=function(e){this.errbacks||(this.errbacks=[]),this.errbacks.push(n(e))},o}var e=Array.prototype.slice;return{createEventEmitter:o}}),function(e,t,n){typeof module!="undefined"&&module.exports?module.exports=n():typeof define=="function"&&define.amd?define(n):t[e]=n()}("reqwest",this,function(){function handleReadyState(e,t,n){return function(){e&&e[readyState]==4&&(e.onreadystatechange=noop,twoHundo.test(e.status)?t(e):n(e))}}function setHeaders(e,t){var n=t.headers||{},r;n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"],!t.crossOrigin&&!n[requestedWith]&&(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||(n[contentType]=t.contentType||defaultHeaders.contentType);for(r in n)n.hasOwnProperty(r)&&e.setRequestHeader(r,n[r])}function setCredentials(e,t){typeof t.withCredentials!="undefined"&&typeof e.withCredentials!="undefined"&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var i=uniqid++,s=e.jsonpCallback||"callback",o=e.jsonpCallbackName||reqwest.getcallbackPrefix(i),u=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),a=r.match(u),f=doc.createElement("script"),l=0,c=navigator.userAgent.indexOf("MSIE 10.0")!==-1;a?a[3]==="?"?r=r.replace(u,"$1="+o):o=a[3]:r=urlappend(r,s+"="+o),win[o]=generalCallback,f.type="text/javascript",f.src=r,f.async=!0,typeof f.onreadystatechange!="undefined"&&!c&&(f.event="onclick",f.htmlFor=f.id="_reqwest_"+i),f.onload=f.onreadystatechange=function(){if(f[readyState]&&f[readyState]!=="complete"&&f[readyState]!=="loaded"||l)return!1;f.onload=f.onreadystatechange=null,f.onclick&&f.onclick(),e.success&&e.success(lastValue),lastValue=undefined,head.removeChild(f),l=1},head.appendChild(f)}function getRequest(e,t,n){var r=(e.method||"GET").toUpperCase(),i=typeof e=="string"?e:e.url,s=e.processData!==!1&&e.data&&typeof e.data!="string"?reqwest.toQueryString(e.data):e.data||null,o;return(e.type=="jsonp"||r=="GET")&&s&&(i=urlappend(i,s),s=null),e.type=="jsonp"?handleJsonp(e,t,n,i):(o=xhr(),o.open(r,i,!0),setHeaders(o,e),setCredentials(o,e),o.onreadystatechange=handleReadyState(o,t,n),e.before&&e.before(o),o.send(s),o)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){var t=e.match(/\.(json|jsonp|html|xml)(\?|$)/);return t?t[1]:"js"}function init(o,fn){function complete(e){o.timeout&&clearTimeout(self.timeout),self.timeout=null;while(self._completeHandlers.length>0)self._completeHandlers.shift()(e)}function success(resp){var r=resp.responseText;if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML}self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp);while(self._fulfillmentHandlers.length>0)self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(e,t,n){self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;while(self._errorHandlers.length>0)self._errorHandlers.shift()(e,t,n);complete(e)}this.url=typeof o=="string"?o:o.url,this.timeout=null,this._fulfilled=!1,this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this,type=o.type||setType(this.url);fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&this._fulfillmentHandlers.push(function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest(o,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n=e.name,r=e.tagName.toLowerCase(),i=function(e){e&&!e.disabled&&t(n,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(e.disabled||!n)return;switch(r){case"input":if(!/reset|button|image|file/i.test(e.type)){var s=/checkbox/i.test(e.type),o=/radio/i.test(e.type),u=e.value;(!s&&!o||e.checked)&&t(n,normalize(s&&u===""?"on":u))}break;case"textarea":t(n,normalize(e.value));break;case"select":if(e.type.toLowerCase()==="select-one")i(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(var a=0;e.length&&a<e.length;a++)e.options[a].selected&&i(e.options[a])}}function eachFormElement(){var e=this,t,n,r,i=function(t,n){for(var i=0;i<n.length;i++){var s=t[byTag](n[i]);for(r=0;r<s.length;r++)serial(s[r],e)}};for(n=0;n<arguments.length;n++)t=arguments[n],/input|select|textarea/i.test(t.tagName)&&serial(t,e),i(t,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}var win=window,doc=document,twoHundo=/^20\d$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +(new Date),lastValue,xmlHttpRequest="XMLHttpRequest",noop=function(){},isArray=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=win[xmlHttpRequest]?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};return Reqwest.prototype={abort:function(){this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return this._fulfilled?e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(arguments.length===0)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),e=="map"?t=serializeHash:e=="array"?t=reqwest.serializeArray:t=serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e){var t="",n,r=encodeURIComponent,i=function(e,n){t+=r(e)+"="+r(n)+"&"};if(isArray(e))for(n=0;e&&n<e.length;n++)i(e[n].name,e[n].value);else for(var s in e){if(!Object.hasOwnProperty.call(e,s))continue;var o=e[s];if(isArray(o))for(n=0;n<o.length;n++)i(s,o[n]);else i(s,e[s])}return t.replace(/&$/,"").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(e){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest}),this.uinit=function(){function t(t,n){return e.reduce(function(e,n){return e&&t[n]&&t[n].loaded},!0,n.depends||[])}function n(t,n){return e.map(function(e){return t[e].result},n)}function r(e,t){r.cache[e.name]=t}function i(e,t){var n=r.cache[e.name];if(!n)return!1;for(var i=0,s=t.length;i<s;++i)if(!uinit.areEqual(t[i],n[i]))return!1;return!0}function s(e,t,s,o){s.reloading?e.emit("reloading",s):e.emit("loading",s);var u=n(t,s.depends||[]),a=when.defer();return when.all(u).then(function(t){var n=(o?[o]:[]).concat(t),u=s.serializeArgs.apply(s,n);if(s.reloading&&i(s,u))return e.emit("skip",s),a.resolve();r(s,u);try{var f=s.action.apply(null,n);if(f||s.nullable)s.loaded=!0,s.result=f,e.emit("loaded",s,f)}catch(l){e.emit("error",s,l)}a.resolve()},function(t){e.emit("error",s,t),a.resolve()}),a.promise}function o(t,n){var r=e.partial(s,t,t.features,n);return n.elements?when.all(e.map(r,dome.byClass(n.elements,t.context))):r()}function u(e,n){return!n.lazy&&!n.loaded&&n.action&&t(e,n)}function a(e){return e&&e.lazy&&!e.loaded}function f(t,n){var r=function(e){return t[e]};return e.uniq(e.reduce(function(t,n){return t.concat(e.select(a,e.map(r,n.depends||[])))},[],n))}function l(t,n){return e.doall(function(t){e.doall(function(e){t[e]=n[e]},e.keys(n))},t)}function c(e){return l(e,{lazy:!1,wasLazy:!0})}function h(t){e.doall(function(e){e.action&&(e.loaded=!1,delete e.reloading),e.wasLazy&&(delete e.wasLazy,e.lazy=!0)},t)}function p(t,n){if(!t.listeners||!t.listeners.pending)return;e.doall(e.bind(t,"emit","pending"),e.select(function(e){return!e.ready&&!e.loaded&&!e.reloading},n))}function d(t,n,r){function l(){var i=e.first(s,a);if(!i)return p(t,n),typeof r=="function"?r():null;o(t,i).then(function(){if(!i.loaded){var t=e.indexOf(i,a);a=a.slice(0,t).concat(a.slice(t+1))}l()})}var i=c(f(t.features,n)),s=e.partial(u,t.features),a=e.uniq(i.concat(n));l()}function v(e,t){if(e[t])throw new Error("Cannot add duplicate "+t)}function g(){return e.map(function(e){return m.features[e]||{name:e,type:"Unknown"}},this.depends||[])}function y(t,n){n.hasOwnProperty("nullable")||(n.nullable=!0),n.hasOwnProperty("serializeArgs")||(n.serializeArgs=function(){return e.map(function(e){return e&&e.tagName&&e.appendChild?dome.uuid(e):e},arguments)}),n.dependencies=g,t.features[n.name]=n,t.tryPending()}function b(t,n){var r=[],i,s=e.values(n);do i=r.length,cull.doall(function(t){r=r.concat(e.select(function(n){return e.indexOf(t,n.depends||[])>=0},s))},t),r=e.uniq(r),t=e.map(e.prop("name"),r);while(i!==r.length);return r}function w(e,t,n){typeof e=="function"&&(n=t,t=e,e=t.name);if(!e)throw new Error("Name cannot be blank");var r=n||{};return r.name=e,r.action=t,r}function E(t,n){var r=b([n],t.features);h(r),e.doall(function(e){e.reloading=!0},r),d(t,r)}var e=cull;r.cache={};var m;return m=bane.createEventEmitter({features:{},env:function(e,t){if(t===null||t===undefined)return;this.nullableEnv(e,t)},nullableEnv:function(e,t){var n=!!this.env[e];n||v(this.features,e);var r=t!==this.env[e];this.env[e]=t,y(this,{name:e,result:t,loaded:!0}),n&&this.loaded&&r&&E(this,e)},data:function(e,t,n){var r=w(e,t,n);return v(this.features,r.name),typeof r.lazy!="boolean"&&(r.lazy=!0),typeof r.nullable!="boolean"&&(r.nullable=!1),y(this,r)},feature:function(e,t,n){var r=w(e,t,n);v(this.features,r.name);if(typeof r.action!="function")throw new Error("Cannot add feature "+r.name+", action is not a function ("+typeof r.action+")");y(this,r)},scanEnvAttrs:function(e,t){var n=e.getElementsByTagName("*"),r=[e].concat([].slice.call(n,0)),i,s,o,u;for(var a=0,f=r.length;a<f;++a){s=r[a].attributes;for(o=0,u=s.length;o<u;++o)i=s.item(o),i.nodeName.indexOf(t)===0&&this.env(i.nodeName.slice(t.length),i.nodeValue)}},load:function(t){this.loaded&&h(e.values(this.features)),this.loaded=!0,this.context=t,this.tryPending()},tryPending:function(){if(!this.loaded)return;this.emit("init"),d(this,e.values(this.features))}}),m},this.uinit.areEqual=function(e,t){return e===t};var Showdown={extensions:{}},forEach=Showdown.forEach=function(e,t){if(typeof e.forEach=="function")e.forEach(t);else{var n,r=e.length;for(n=0;n<r;n++)t(e[n],n,e)}},stdExtName=function(e){return e.replace(/[_-]||\s/g,"").toLowerCase()};Showdown.converter=function(e){var t,n,r,i=0,s=[],o=[];if(typeof module!="undefind"&&typeof exports!="undefined"&&typeof require!="undefind"){var u=require("fs");if(u){var a=u.readdirSync((__dirname||".")+"/extensions").filter(function(e){return~e.indexOf(".js")}).map(function(e){return e.replace(/\.js$/,"")});Showdown.forEach(a,function(e){var t=stdExtName(e);Showdown.extensions[t]=require("./extensions/"+e)})}}this.makeHtml=function(e){return t={},n={},r=[],e=e.replace(/~/g,"~T"),e=e.replace(/\$/g,"~D"),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e="\n\n"+e+"\n\n",e=F(e),e=e.replace(/^[ \t]+$/mg,""),Showdown.forEach(s,function(t){e=l(t,e)}),e=N(e),e=h(e),e=c(e),e=d(e),e=B(e),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~"),Showdown.forEach(o,function(t){e=l(t,e)}),e};if(e&&e.extensions){var f=this;Showdown.forEach(e.extensions,function(e){typeof e=="string"&&(e=Showdown.extensions[stdExtName(e)]);if(typeof e!="function")throw"Extension '"+e+"' could not be loaded.  It was either not found or is not a valid extension.";Showdown.forEach(e(f),function(e){e.type?e.type==="language"||e.type==="lang"?s.push(e):(e.type==="output"||e.type==="html")&&o.push(e):o.push(e)})})}var l=function(e,t){if(e.regex){var n=new RegExp(e.regex,"g");return t.replace(n,e.replace)}if(e.filter)return e.filter(t)},c=function(e){return e+="~0",e=e.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(e,r,i,s,o){return r=r.toLowerCase(),t[r]=_(i),s?s+o:(o&&(n[r]=o.replace(/"/g,"&quot;")),"")}),e=e.replace(/~0/,""),e},h=function(e){e=e.replace(/\n/g,"\n\n");var t="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del|style|section|header|footer|nav|article|aside",n="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside";return e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,p),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,p),e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,p),e=e.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,p),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,p),e=e.replace(/\n\n/g,"\n"),e},p=function(e,t){var n=t;return n=n.replace(/\n\n/g,"\n"),n=n.replace(/^\n/,""),n=n.replace(/\n+$/g,""),n="\n\n~K"+(r.push(n)-1)+"K\n\n",n},d=function(e){e=E(e);var t=C("<hr />");return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,t),e=x(e),e=T(e),e=O(e),e=h(e),e=M(e),e},v=function(e){return e=k(e),e=m(e),e=D(e),e=b(e),e=g(e),e=P(e),e=_(e),e=A(e),e=e.replace(/  +\n/g," <br />\n"),e},m=function(e){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return e=e.replace(t,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=I(t,"\\`*_"),t}),e},g=function(e){return e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,y),e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,y),e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,y),e
},y=function(e,r,i,s,o,u,a,f){f==undefined&&(f="");var l=r,c=i,h=s.toLowerCase(),p=o,d=f;if(p==""){h==""&&(h=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+h;if(t[h]!=undefined)p=t[h],n[h]!=undefined&&(d=n[h]);else{if(!(l.search(/\(\s*\)$/m)>-1))return l;p=""}}p=I(p,"*_");var v='<a href="'+p+'"';return d!=""&&(d=d.replace(/"/g,"&quot;"),d=I(d,"*_"),v+=' title="'+d+'"'),v+=">"+c+"</a>",v},b=function(e){return e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,w),e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,w),e},w=function(e,r,i,s,o,u,a,f){var l=r,c=i,h=s.toLowerCase(),p=o,d=f;d||(d="");if(p==""){h==""&&(h=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+h;if(t[h]==undefined)return l;p=t[h],n[h]!=undefined&&(d=n[h])}c=c.replace(/"/g,"&quot;"),p=I(p,"*_");var v='<img src="'+p+'" alt="'+c+'"';return d=d.replace(/"/g,"&quot;"),d=I(d,"*_"),v+=' title="'+d+'"',v+=" />",v},E=function(e){function t(e){return e.replace(/[^\w]/g,"").toLowerCase()}return e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,n){return C('<h1 id="'+t(n)+'">'+v(n)+"</h1>")}),e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,n){return C('<h2 id="'+t(n)+'">'+v(n)+"</h2>")}),e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,n,r){var i=n.length;return C("<h"+i+' id="'+t(r)+'">'+v(r)+"</h"+i+">")}),e},S,x=function(e){e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return i?e=e.replace(t,function(e,t,n){var r=t,i=n.search(/[*+-]/g)>-1?"ul":"ol";r=r.replace(/\n{2,}/g,"\n\n\n");var s=S(r);return s=s.replace(/\s+$/,""),s="<"+i+">"+s+"</"+i+">\n",s}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(t,function(e,t,n,r){var i=t,s=n,o=r.search(/[*+-]/g)>-1?"ul":"ol",s=s.replace(/\n{2,}/g,"\n\n\n"),u=S(s);return u=i+"<"+o+">\n"+u+"</"+o+">\n",u})),e=e.replace(/~0/,""),e};S=function(e){return i++,e=e.replace(/\n{2,}$/,"\n"),e+="~0",e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(e,t,n,r,i){var s=i,o=t,u=n;return o||s.search(/\n{2,}/)>-1?s=d(j(s)):(s=x(j(s)),s=s.replace(/\n$/,""),s=v(s)),"<li>"+s+"</li>\n"}),e=e.replace(/~0/g,""),i--,e};var T=function(e){return e+="~0",e=e.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var r=t,i=n;return r=L(j(r)),r=F(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code>"+r+"\n</code></pre>",C(r)+i}),e=e.replace(/~0/,""),e},N=function(e){return e+="~0",e=e.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(e,t,n){var r=t,i=n;return i=L(i),i=F(i),i=i.replace(/^\n+/g,""),i=i.replace(/\n+$/g,""),i="<pre><code"+(r?' class="'+r+'"':"")+">"+i+"\n</code></pre>",C(i)}),e=e.replace(/~0/,""),e},C=function(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(r.push(e)-1)+"K\n\n"},k=function(e){return e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,r,i){var s=r;return s=s.replace(/^([ \t]*)/g,""),s=s.replace(/[ \t]*$/g,""),s=L(s),t+"<code>"+s+"</code>"}),e},L=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=I(e,"*_{}[]\\",!1),e},A=function(e){return e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),e=e.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),e},O=function(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;return n=n.replace(/^[ \t]*>[ \t]?/gm,"~0"),n=n.replace(/~0/g,""),n=n.replace(/^[ \t]+$/gm,""),n=d(n),n=n.replace(/(^|\n)/g,"$1  "),n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return n=n.replace(/^  /mg,"~0"),n=n.replace(/~0/g,""),n}),C("<blockquote>\n"+n+"\n</blockquote>")}),e},M=function(e){e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");var t=e.split(/\n{2,}/g),n=[],i=t.length;for(var s=0;s<i;s++){var o=t[s];o.search(/~K(\d+)K/g)>=0?n.push(o):o.search(/\S/)>=0&&(o=v(o),o=o.replace(/^([ \t]*)/g,"<p>"),o+="</p>",n.push(o))}i=n.length;for(var s=0;s<i;s++)while(n[s].search(/~K(\d+)K/)>=0){var u=r[RegExp.$1];u=u.replace(/\$/g,"$$$$"),n[s]=n[s].replace(/~K\d+K/,u)}return n.join("\n\n")},_=function(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?\$!])/gi,"&lt;"),e},D=function(e){return e=e.replace(/\\(\\)/g,q),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,q),e},P=function(e){return e=e.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),e=e.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(e,t){return H(B(t))}),e},H=function(e){var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e="mailto:"+e,e=e.replace(/./g,function(e){if(e=="@")e=t[Math.floor(Math.random()*2)](e);else if(e!=":"){var n=Math.random();e=n>.9?t[2](e):n>.45?t[1](e):t[0](e)}return e}),e='<a href="'+e+'">'+e+"</a>",e=e.replace(/">.+:/g,'">'),e},B=function(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)}),e},j=function(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,""),e},F=function(e){return e=e.replace(/\t(?=\t)/g,"    "),e=e.replace(/\t/g,"~A~B"),e=e.replace(/~B(.+?)~A/g,function(e,t,n){var r=t,i=4-r.length%4;for(var s=0;s<i;s++)r+=" ";return r}),e=e.replace(/~A/g,"    "),e=e.replace(/~B/g,""),e},I=function(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return e=e.replace(i,q),e},q=function(e,t){var n=t.charCodeAt(0);return"~E"+n+"E"}},typeof module!="undefined"&&(module.exports=Showdown),typeof define=="function"&&define.amd&&define("showdown",function(){return Showdown}),function(e){typeof define=="function"&&define.amd?define([],e):this.timeago=e()}(function(){function t(e,t,n,r){var i=typeof t=="function"?t(r,n):t,s=e.numbers&&e.numbers[r]||r;return i.replace(/%d/i,s)}function n(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function i(e){this.locale=e;for(var t in r)typeof this.locale[t]=="undefined"&&(this.locale[t]=r[t])}var e,r={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]};return i.prototype=e={locale:r,locales:{en:r},configure:function(t){var n=new i(t||e.locales.en);return n},relative:function(e){return this.inWords((new Date).getTime()-e.getTime())},inWords:function(e){var r=this.locale,i=r.prefixAgo,s=r.suffixAgo;e<0&&(i=r.prefixFromNow,s=r.suffixFromNow);var o=Math.abs(e)/1e3,u=o/60,a=u/60,f=a/24,l=f/365,c=o<45&&t(r,r.seconds,e,Math.round(o))||o<90&&t(r,r.minute,e,1)||u<45&&t(r,r.minutes,e,Math.round(u))||u<90&&t(r,r.hour,e,1)||a<24&&t(r,r.hours,e,Math.round(a))||a<42&&t(r,r.day,e,1)||f<30&&t(r,r.days,e,Math.round(f))||f<45&&t(r,r.month,e,1)||f<365&&t(r,r.months,e,Math.round(f/30))||l<1.5&&t(r,r.year,e,1)||t(r,r.years,e,Math.round(l));return c=[i,c,s].join(typeof r.wordSeparator=="string"?r.wordSeparator:""),n(c)},parse:function(e){var t=n(e);return t=t.replace(/\.\d+/,""),t=t.replace(/-/,"/").replace(/-/,"/"),t=t.replace(/T/," ").replace(/Z/," UTC"),t=t.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(t)}},e});this.gts=this.gts||{};this.gts.app=this.uinit();!function(){var isArray=Array.isArray||function(arr){return Object.prototype.toString.call(arr)==="[object Array]"};this.uinit.areEqual=function areEqual(a,b){if(a===b){return true}if(isArray(a)||!isArray(b)){return a.length!==b.length}var i,l;for(i=0,l=a.length;i<l;++i){if(!areEqual(a[i],b[i])){return false}}return true}}();this.gts=this.gts||{};this.gts.cache=function(fn){var cache=[];function equal(arr1,arr2){if(arr1.length!==arr2.length){return false}for(var i=0,l=arr1.length;i<l;++i){if(arr1[i]!==arr2[i]){return false}}return true}return function(){var args=[].slice.call(arguments);var i,l,j,k,result;for(i=0,l=cache.length;i<l;++i){if(equal(cache[i].args,args)){return cache[i].result}}result=fn.apply(self,args);cache.push({args:args,result:result});return result}};this.gts=this.gts||{};this.gts.jsonRequest=function(url){return reqwest({url:url,type:"json"})};this.gts.dropdown=function(D){return function dropdown(element){var backdrop,active=false;function close(){if(backdrop){backdrop.parentNode.removeChild(backdrop);backdrop=null}D.cn.rm("open",element);active=false}function toggle(element){if(active){return close()}if(document.documentElement.hasOwnProperty("ontouchstart")){backdrop=D.el("div",{className:"dropdown-backdrop",events:{click:close}});element.insertBefore(backdrop,element)}D.cn.add("open",element);active=true}D.on(element,"click",function(e){var target=e.target.tagName==="A"?e.target:e.target.parentNode;if(!dome.cn.has("dropdown-toggle",target)){return}toggle(this);e.preventDefault();e.stopPropagation()});D.on(document.body,"click",close);D.on(document.body,"keydown",function(e){if(e.keyCode!==27){return}close();e.preventDefault();e.stopPropagation()})}}(dome);var gts=this.gts||{};gts.googleAnalytics=function(account,domainName){window._gaq=window._gaq||[];window._gaq.push(["_setAccount",account]);if(domainName){window._gaq.push(["_setDomainName",domainName])}window._gaq.push(["_trackPageview"]);var ga=document.createElement("script");ga.type="text/javascript";ga.async=true;ga.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(ga)};this.gts=this.gts||{};this.gts.abbrev=function(sentence,width,suffix){if(sentence.length<=width){return sentence}suffix=suffix||"";return cull.reduce(function(words,word){if(words.join(" ").length+word.length+suffix.length<=width){words.push(word)}return words},[],sentence.split(" ")).join(" ")+suffix};this.gts=this.gts||{};this.gts.url=function(){function path(url){var pieces=url.split("/");pieces.shift();pieces.shift();pieces.shift();return"/"+pieces.join("/")}function templatize(url,values){return cull.reduce(function(result,n){return result.replace(new RegExp(values[n],"g"),"#{"+n+"}")},path(url),cull.keys(values))}function render(template,data){return cull.reduce(function(result,p){return result.replace(new RegExp("#{"+p+"}","g"),data[p])},template,cull.keys(data))}function currentRef(url){var regexp=/(blame|blob|tree|history|raw|source|readme|commits)\//;var refPath=url.split(regexp)[2];return refPath&&refPath.split(":")[0]||null}return{templatize:templatize,render:render,currentRef:currentRef}}();this.gts=this.gts||{};this.gts.refSelector=function(e){function tpl(template,ref){return(template||"#{ref}").replace(/#\{ref\}/g,ref)}function getCurrent(type,refName,refs){return cull.select(function(ref){return ref[0]===refName||ref[1]===refName},refs[type]||[])[0]}function currentRefLink(refs,current){var currentRef=getCurrent("heads",current,refs);var type="branch";if(!currentRef){currentRef=getCurrent("tags",current,refs);type="tag"}if(!currentRef){type="ref"}return e.a({href:"#",className:"dropdown-toggle",innerHTML:'<span class="caret"></span> <em>'+type+":</em> "+(currentRef&&currentRef[0]||current)})}function refInput(url){var input=e.input({type:"text",className:"gts-ref-input"});var form=e.form({className:"gts-ref-input",events:{submit:function(e){e.preventDefault();window.location=tpl(url,input.value)}}},[input]);return e.li({className:"gts-dropdown-input",events:{click:function(e){e.stopPropagation()}}},[e.strong(["Enter ref: ",form])])}function refItems(label,refs,urlTemplate){var initial=[e.li({className:"dropdown-label"},[e.strong(label)])];return cull.reduce(function(elements,ref){var url=tpl(urlTemplate,ref[1]);elements.push(e.li(e.a({href:url},ref[0])));return elements},initial,refs.sort())}function refsList(refs,urlTemplate){return e.ul({className:"dropdown-menu"},[refInput(urlTemplate)].concat(refItems("Branches",refs.heads||[],urlTemplate)).concat(refItems("Tags",refs.tags||[],urlTemplate)))}function build(refs,current,urlTemplate){return e.div({className:"dropdown gts-branch-selector pull-right"},[currentRefLink(refs,current),refsList(refs,urlTemplate)])}function refSelector(placeholder,refs,ref,refUrlTemplate){var selector=build(refs,ref,refUrlTemplate);placeholder.parentNode.insertBefore(selector,placeholder);placeholder.parentNode.removeChild(placeholder);this.gts.dropdown(selector)}refSelector.build=build;refSelector.getCurrentRef=getCurrent;return refSelector}(dome.el);this.gts=this.gts||{};this.gts.treeHistory=function(c,d){function el(element,tagName){return element.getElementsByTagName(tagName)}var th=function(table,url){var cell=el(el(table,"tbody")[0],"td")[2];var spinner=new Spinner({lines:13,length:1,width:2,radius:6,corners:1,rotate:0,color:"#000",speed:1,trail:60,shadow:false,hwaccel:true,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}).spin(cell);reqwest({url:url,type:"json",success:function(tree){spinner.stop();th.annotate(table,tree)}})};var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dev"];function getFileMeta(fileName,tree){return c.select(function(e){return e.name===fileName},tree)[0]}function formatDate(dateStr){if(!Date.parse){return""}var d=new Date(Date.parse(dateStr));return months[d.getMonth()]+" "+d.getDate()+" "+d.getFullYear()}function getTreeIndent(cells){var i,l;for(i=0,l=cells.length;i<l;++i){if(dome.cn.has("gts-name",cells[i])){return i}}return i}function fileName(element){return(element&&dome.text(element)||"").trim()}th.annotateRow=function(tree,row){var tds=el(row,"td");var offset=getTreeIndent(tds);var entry=getFileMeta(fileName(tds[offset]),tree);if(!entry){return}var commit=entry.history[0];tds[offset+1].innerHTML=formatDate(commit.date);dome.data.set({"gts-commit-oid":commit.oid},tds[offset+2]);tds[offset+2].innerHTML="#"+commit.oid.slice(0,7);var summary=commit.summary.trim();tds[offset+3].innerHTML=gts.abbrev(summary,50," [...]")+" ("+commit.author.name+")"};th.annotate=function(table,tree){c.doall(c.partial(function(tree,row){th.annotateRow(tree,row)},tree),el(el(table,"tbody")[0],"tr"))};return th}(cull);var gts=this.gts||{};!function(partial,d){gts.commitLinker=function(root,urlTemplate,handler){d.cn.add("gts-commit-linker",root);d.delegate.bycn("gts-commit-oid",root,"click",function(e){handler(gts.url.render(urlTemplate,{oid:dome.data.get("gts-commit-oid",this)}))})}}(cull.partial,dome);this.gts.userRepoViewState=function(path){return reqwest({url:path,type:"json"})};var gts=this.gts||{};!function(d,e){function button(text,path,icon){text=" "+text;var content=icon?[e.i({className:"icon-"+icon}),text]:[text];return e.li(e.a({href:path},content))}gts.profileMenu=function(root,user){if(!user){return}d.setContent([e.a({className:"btn btn-inverse",href:user.dashboardPath},[e.i({className:"icon-user icon-white"}),user.login]),e.a({className:"btn btn-inverse dropdown-toggle",href:"#",data:{toggle:"dropdown"}},e.span({className:"caret"}," ")),e.ul({className:"dropdown-menu"},[button("Edit",user.editPath,"pencil"),button("Messages",user.messagesPath,"envelope"),e.li({className:"divider"}),button("Dashboard",user.dashboardPath),button("Public profile",user.profilePath),button("Log out",user.logoutPath)])],root);gts.dropdown(root)}}(dome,dome.el);this.gts=this.gts||{};this.gts.cloneUrlSelection=function(){function selectCloneUrl(element,selected){var links=dome.byClass("gts-repo-url",element);cull.doall(cull.partial(dome.cn.rm,"active"),links);if(selected){dome.cn.add("active",selected);var input=dome.byClass("gts-current-repo-url",element)[0];input.value=selected.getAttribute("href").replace("ssh://","");input.focus()}}function cloneUrlSelection(element){var input=element.getElementsByTagName("input")[0];if(input){dome.on(input,"focus",function(e){this.select()})}dome.delegate.bycn("gts-repo-url",element,"click",function(e){e.preventDefault();e.stopPropagation();selectCloneUrl(element,e.target)})}cloneUrlSelection.select=selectCloneUrl;return cloneUrlSelection}();this.gts=this.gts||{};this.gts.blob=function(){function highlightRegion(element,region){var start=region[0]-1;var end=region[1]-1;var lines=element.getElementsByTagName("li");cull.doall(function(li,num){var inRegion=start<=num&&num<=end;dome.cn[inRegion?"add":"rm"]("region",li)},element.getElementsByTagName("li"))}function getLineNum(element){while(element&&element.tagName!=="LI"){element=element.parentNode}var lineNum=element&&element.className.match(/L(\d+)/)[1];if(!lineNum){return}return parseInt(lineNum,10)}function setRegion(element,region,redirect){var regionStr=region[0];regionStr+=region[1]!==region[0]?"-"+region[1]:"";redirect("#L"+regionStr);highlightRegion(element,region)}function orderedRegion(start,end){end=typeof end==="number"?end:start;return[Math.min(start,end),Math.max(start,end)]}function trackSelectedRegion(element,redirect){var shift=false,anchor;var events=[];dome.on(document.body,"keydown",function(e){shift=e.which===16});dome.on(document.body,"keyup",function(e){shift=e.which!==16});dome.on(element,"click",function(e){var region,currLine=getLineNum(e.target);if(!shift||!anchor){anchor=e.target}if(anchor&&shift){region=orderedRegion(getLineNum(anchor),currLine);e.preventDefault()}else{region=[currLine,currLine]}setRegion(element,region,redirect)})}function trackFocus(element,redirect){var highlight=function(){dome.cn.add("focus",this)};var dim=function(){dome.cn.rm("focus",this)};cull.doall(function(li){dome.on(li,"mouseenter",highlight);dome.on(li,"mouseleave",dim)},element.getElementsByTagName("li"));trackSelectedRegion(element,redirect)}function regionFromUrl(url){var matches=url.match(/\#l(\d+)(?:-(\d+))?/i);if(!matches){return}return orderedRegion(matches[1],matches[2]&&Number(matches[2]))}return{trackFocus:trackFocus,regionFromUrl:regionFromUrl,highlightRegion:highlightRegion}}();this.gts.liveMarkdownPreview=function liveMarkdownPreview(textarea){var attr=textarea.getAttribute("data-gts-preview-target");var target=document.getElementById(attr);if(!target||typeof Showdown==="undefined"){return}var converter=new Showdown.converter;var previous,content;function setPreview(preview){target.style.display=preview?"block":"none";target.getElementsByTagName("div")[0].innerHTML=preview}function updatePreview(){content=textarea.value;if(content!==previous){previous=content;setPreview(converter.makeHtml(content))}setTimeout(updatePreview,20)}updatePreview()};this.gts=this.gts||{};this.gts.timeago=function(ta){function timeago(el,time){var date=ta.parse(time||el.title);if(isNaN(date.getTime())){return el}var text=el.innerHTML.trim()||el.title;el.innerHTML=ta.relative(date);el.title=text;return el}var cache={};timeago.periodic=function(timeout){if(!cache[timeout]){cache[timeout]=[];setInterval(function(){for(var i=0,l=cache[timeout].length,item;i<l;++i){item=cache[timeout][i];gts.timeago(item.element,item.time)}},timeout)}return function(el){cache[timeout].push({element:el,time:el.title});return timeago(el,el.title)}};return timeago}(timeago);this.gts.collapse=function(){dome.on(document.body,"click",function(e){if(dome.data.get("toggle",e.target)!=="collapse"){return}var target=dome.id(dome.data.get("target",e.target).slice(1));if(!target){return}dome.cn[dome.cn.has("in",target)?"rm":"add"]("in",target);e.preventDefault();e.stopPropagation()})};this.gts=this.gts||{};this.gts.repository=function(el){function bullet(type,text){return[el.i({className:type})," "+text]}function link(href,type,text){return el.a({href:href},bullet(type,text))}function build(data,tagName){return el[tagName||"li"]({className:"pull-right dropdown"},[el.a({href:"#","data-toggle":"dropdown",className:"dropdown-toggle"},bullet("icon-cog","Admin")),el.ul({className:"dropdown-menu"},[el.li(link(data.editPath,"icon-pencil","Edit repository")),el.li(link(data.destroyPath,"icon-trash","Delete repository")),el.li({className:"divider"}),el.li(link(data.webHooksPath,"i","Web hooks")),el.li(link(data.ownershipPath,"i","Transfer ownership")),el.li(link(data.committershipsPath,"i","Manage collaborators"))])])}function repositoryAdmin(placeholder,data){var toggler=build(data,placeholder.tagName.toLowerCase());dome.replace(placeholder,toggler);this.gts.dropdown(toggler);if(dome.data.get("gts-active",toggler.parentNode)==="admin"){dome.cn.add("active",toggler)}}repositoryAdmin.build=build;function render(link,repository){if(repository.watching){link.innerHTML='<i class="icon icon-star"></i> Unwatch';link.href=repository.unwatchPath}else{link.innerHTML='<i class="icon icon-star-empty"></i> Watch';link.href=repository.watchPath}}function unwatch(link,repository){gts.request({url:repository.unwatchPath,method:"delete",type:"js",headers:{Accept:"application/javascript, text/javascript"},success:function(xhr){repository.watching=false;render(link,repository)},error:function(){link.innerHTML="Failed, try watching again"}})}function watch(link,repository){gts.request({url:repository.watchPath,method:"post",type:"text",headers:{Accept:"application/javascript, text/javascript"},success:function(xhr){repository.watching=true;repository.unwatchPath=xhr.getResponseHeader("location");render(link,repository)},error:function(){link.innerHTML="Failed, try unwatching again"}})}function toggleState(link,repository){gts.loading(link);if(repository.watching){unwatch(link,repository)}else{watch(link,repository)}}function repositoryWatching(ph,repositoryWatch){var link=dome.el("a",{className:"btn"});dome.replace(ph,link);render(link,repositoryWatch);dome.on(link,"click",function(e){e.preventDefault();e.stopPropagation();toggleState(link,repositoryWatch)})}repositoryWatching.watch=watch;repositoryWatching.unwatch=unwatch;repositoryWatching.toggleState=toggleState;repositoryWatching.render=render;function repositoryCloning(placeholder,repository){if(!repository.clonePath){return}dome.replace(placeholder,dome.el("a",{href:repository.clonePath,className:"btn"},"Clone"))}function mergeRequest(placeholder,repository){if(!repository.requestMergePath){return}dome.replace(placeholder,dome.el("li",{className:"pull-right"},[dome.el("a",{href:repository.requestMergePath},[dome.el("i",{className:"icon icon-random"})," Request merge"])]))}return{admin:repositoryAdmin,watching:repositoryWatching,cloning:repositoryCloning,mergeRequest:mergeRequest}}(dome.el);this.gts=this.gts||{};this.gts.railsLinks=function(csrfParam,csrfToken){dome.on(document.body,"click",function(e){var method=dome.data.get("method",e.target);if(!method||method==="get"){return true}e.preventDefault();e.stopPropagation();var href=e.target.href;var form=dome.el("form",{method:"post",action:href,style:{display:"none"}},[dome.el("input",{name:"_method",value:method,type:"hidden"}),dome.el("input",{name:csrfParam,value:csrfToken,type:"hidden"})]);document.body.appendChild(form);form.submit()})};this.gts=this.gts||{};this.gts.cloneNameSuggestion=function(){function repoName(name,repo){var prefix=/s$/.test(name)?name:name+"s";return prefix+"-"+repo}return function cloneNameSuggestion(form){var repo=dome.data.get("gts-repository-to-clone",form);var userInput=dome.id("repository_owner_type_user");var groupInput=dome.id("repository_owner_type_group");var groupSelect=dome.id("repository_owner_id_group_select");var nameInput=dome.id("repository_name");var names=cull.reduce(function(memo,option){return memo.concat(repoName(option.innerHTML,repo))},[repoName(dome.data.get("gts-owner",userInput),repo)],groupSelect.options);function setSuggestion(){if(nameInput.value&&cull.indexOf(nameInput.value,names)<0){return}if(userInput.checked){nameInput.value=names[0];return}if(groupInput.checked){var option=groupSelect.options[groupSelect.selectedIndex];nameInput.value=repoName(option.innerHTML,repo)}}dome.on(userInput,"click",setSuggestion);dome.on(groupInput,"click",setSuggestion);dome.on(groupSelect,"change",setSuggestion);setSuggestion()}}();this.gts=this.gts||{};this.gts.loading=function(element,options){dome.cn.add("loading",element);element.innerHTML="";options=options||{};var spinner=new Spinner({lines:options.hasOwnProperty("lines")?options.lines:8,length:options.hasOwnProperty("length")?options.length:2,width:options.hasOwnProperty("width")?options.width:2,radius:options.hasOwnProperty("radius")?options.radius:3,color:options.color||"#000",speed:options.hasOwnProperty("speed")?options.speed:1,trail:options.hasOwnProperty("trail")?options.trail:100,shadow:options.hasOwnProperty("shadow")?options.shadow:false}).spin();spinner.el.style.top=options.topPos||"10px";element.appendChild(spinner.el);var text=options.hasOwnProperty("text")?options.text:"Loading...";if(text){var textEl=document.createElement("span");textEl.innerHTML=text;element.appendChild(textEl)}};this.gts=this.gts||{};this.gts.oidRefInterpolator=function(element,refs,urlTemplate){var current=this.gts.refSelector.getCurrentRef("heads",element.innerHTML,refs);if(current){element.title=current[1];element.innerHTML=current[0]}};this.gts=this.gts||{};this.gts.comments=function(el){function renderCommentDate(comment){var created=this.gts.timeago(el.span({title:comment.createdAt}));if(comment.createdAt===comment.updatedAt){return created}return el.span([created,"(edited ",this.gts.timeago(el.span({title:comment.updatedAt})),")"])}function renderEditForm(comment){console.log("Edit")}function renderEditLink(comment){if(!comment.editPath){return""}var link=el.a({href:comment.editPath,events:{click:function(e){e.preventDefault();e.stopPropagation();renderEditForm(link.parentNode.parentNode)}}},"Edit comment");return link}function renderComment(comment){var author=comment.author;return el.div({className:"gts-comment"},[el.p({innerHTML:comment.body}),el.p([el.img({src:author.avatarPath}),el.a({href:author.profilePath},author.name),renderCommentDate(comment),renderEditLink(comment)])])}function renderComments(comments,container){if(comments.length===0){return}container.style.display="block";var inner=document.createElement("div");container.appendChild(inner);dome.setContent(cull.map(renderComment,comments),inner)}function zeroPad(num){return num<10?"0"+num:num}function personalizeForm(user,form){form.style.display="block";var ph=dome.byClass("gts-comment-author-ph",form)[0];if(!ph){return ph}var now=new Date;return dome.replace(ph,el.p([el.img({src:user.avatarPath}),el.a({href:user.profilePath},user.name)," "+zeroPad(now.getHours())+":"+zeroPad(now.getMinutes())]))}return{renderComments:renderComments,renderComment:renderComment,personalizeForm:personalizeForm}}(dome.el);this.gts=this.gts||{};this.gts.slugify=function(){function toSlug(text){return text.toLowerCase().replace(/[^a-z0-9_\-]+/g,"-")}function safeToOverwrite(source,target){return target.value===""||toSlug(source.value)===target.value}return function slugify(source,target){var isLocked=safeToOverwrite(source,target);function attemptOverwrite(){if(!isLocked){target.value=toSlug(source.value)}}dome.on(source,"keydown",function(){isLocked=safeToOverwrite(source,target)});dome.on(source,"keyup",attemptOverwrite);attemptOverwrite()}}();gts.app.env("url",window.location.href);gts.app.env("redirect",function(url){window.location=url});if(window.hasOwnProperty("onpopstate")){window.onpopstate=function(event){gts.app.env("url",window.location.href)}}cull.doall(function(meta){if(meta.name==="csrf-param"){gts.app.env("csrf-param",meta.content)}if(meta.name==="csrf-token"){gts.app.env("csrf-token",meta.content)}},document.getElementsByTagName("meta"));gts.request=function(options){options.headers=options.headers||{};options.headers["X-CSRF-Token"]=gts.app.env["csrf-token"];reqwest(options)};!function(){var input=document.getElementById("project-title");if(input){gts.env("project-title-input",input)}input=document.getElementById("project-slug");if(input){gts.env("project-slug-input",input)}}();gts.app.data("ref-url-template",function(url,ref){return gts.url.templatize(url,{ref:ref})},{depends:["url","current-ref"],serializeArgs:function(url,ref){return[url.split("#")[0],ref]}});gts.app.data("repository-refs",this.gts.jsonRequest,{depends:["repository-refs-url"]});gts.app.data("current-ref",gts.url.currentRef,{depends:["url"]});gts.app.data("user-repo-view-state",gts.cache(gts.userRepoViewState),{depends:["user-repository-path"]});gts.app.data("current-user",cull.prop("user"),{depends:["user-repo-view-state"]});gts.app.data("current-repository",cull.prop("repository"),{depends:["user-repo-view-state"]});gts.app.data("repository-watch",cull.prop("watch"),{depends:["current-repository"]});gts.app.data("repository-admin",cull.prop("admin"),{depends:["current-repository"]});gts.app.data("blob-region",gts.blob.regionFromUrl,{depends:["url"]});gts.app.feature("google-analytics",gts.googleAnalytics,{depends:["analytics-account","analytics-domain-name"]});gts.app.feature("dropdown",gts.dropdown,{elements:["dropdown"]});gts.app.feature("ref-selector",gts.refSelector,{elements:["gts-ref-selector-ph"],depends:["repository-refs","current-ref","ref-url-template"]});gts.app.feature("oid-ref-interpolator",gts.oidRefInterpolator,{elements:["gts-oid"],depends:["repository-refs","ref-url-template"]});gts.app.feature("tree-history",gts.treeHistory,{elements:["gts-tree-explorer"],depends:["tree-history-url"]});gts.app.feature("commit-linker",gts.commitLinker,{elements:["gts-body"],depends:["commit-url-template","redirect"]});gts.app.feature("profile-menu",gts.profileMenu,{elements:["login_button"],depends:["current-user"]});gts.app.feature("clone-url-selection",gts.cloneUrlSelection,{elements:["gts-repo-urls"]});gts.app.feature("highlight-region",gts.blob.highlightRegion,{elements:["gts-lines"],depends:["blob-region"]});gts.app.feature("track-blob-focus",gts.blob.trackFocus,{elements:["gts-lines"],depends:["redirect"]});gts.app.feature("live-markdown-preview",gts.liveMarkdownPreview,{elements:["gts-live-markdown-preview"]});gts.app.feature("timeago",gts.timeago.periodic(6e4),{elements:["timeago"]});gts.app.feature("collapse",gts.collapse);gts.app.feature("clone-name-suggestion",gts.cloneNameSuggestion,{elements:["clone-repository-form"]});gts.app.feature("loading",gts.loading,{elements:["loading"]});gts.app.feature("rails-links",gts.railsLinks,{depends:["csrf-param","csrf-token"]});gts.app.feature("repository-admin-menu",gts.repository.admin,{elements:["gts-repository-admin-ph"],depends:["repository-admin"]});gts.app.feature("repository-watching",gts.repository.watching,{elements:["gts-watch-repository-ph"],depends:["repository-watch"]});gts.app.feature("repository-cloning",gts.repository.cloning,{elements:["gts-clone-repository-ph"],depends:["current-repository"]});gts.app.feature("repository-merge-request",gts.repository.mergeRequest,{elements:["gts-request-merge-ph"],depends:["current-repository"]});gts.app.feature("slugify-project-title",gts.slugify,{depends:["project-title-input","project-slug-input"]});setTimeout(function(){gts.app.scanEnvAttrs(document.body,"data-gts-env-");gts.app.load(document.documentElement)},10);